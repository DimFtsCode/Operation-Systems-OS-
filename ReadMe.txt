Sdi2000292 Fotopoulos Dimitrios Project 3

main.c

Στην main υπαρχει μια συναρτηση file_Server η οποια τρεχει σε εναν ατερμονα βρογχο
ο οποιος λαμβανει request απο την shared memory. Υπαρχουν δυο ειδων σηματοφοροι 
στην συγκεκριμενη συναρτηση. Ενας για να ελεγχει οτι υπαρχει πακετο στην κοινο-
χρηστη μνημη. Ενας δευτερος για να ελεγχει την προσβαση στην κοινοχρηστη μνημη να
μην γινεται παραλληλα με εγγραφες. Υπαρχει και ελεγχος ανα ενα δευτερολεπτο αν η
flag του file_Server αλλαξε τιμη ωστε τερματιζει ο βρογχος. Εφοσον εχει δεχτει 
request δημιουργει ενα νημα για την εξυπηρετηση του request δινοντας ως ορισμα
το request.

H συναρτηση request_handler δεχεται το request του πελατη απο τον file_Server
ανοιγει το βιβλιο που ζηταει ο πελατης και του επιστρεφει τις γραμμες απο το 
βιβλιο που ζηταει ο πελατης γραμμη γραμμη μεσω της κοινοχρηστης μνημης που εχει
δημιουργει ο πελατης. Μεσω 2 σηματοφορων sem_server , sem_client, γινεται ο συγ-
χρονισμος τους ωστε να στελνει γραμμη το νημα να παραλαμβανει γραμμη ο πελατης 
σειριακα ωστε να παραλαβει ολες τις γραμμες.

Στην main συναρτηση δημιουργειτε η shared_memory για τα request μεταξυ πελατη και
file_Server. Στην συνεχεια δημιουργειτε μια διεργασια που μεσα της θα τρεχει ο 
file_Server. Μετα με βαση τα ορισματα που εχει παρει απο τον χρηστη δημιουργει τις
αντιστοιχες διεργασιες. Καθε διεργασια δημιουργει την δικια της κοινοχρηστη μνημη
αρχικοποιει καποιες τιμες για το print , start , stop , το βιβλιο, στελνει το request
με τις αντιστοιχες τιμες και περιμενει να λαβει τις αντιστοιχες γραμμες τις οποιες
,κραταει τα δεδομενα και τα επιστρεφει στον χρηστη. 

Τα αρχεία δημιουργούνται με bash_script το οποίο δημιουργεί αρχεία 10 γραμμών με 100 
γράμματα κάθε γραμμή.Εχω ρυηθμίσει τον κώδικα μου απο 10 αρχεία  που έχουν δημιουργήθει
με τον παραπάνω τρόπο να επιλέγει τυχαία και ποίες γραμμές αλλά και ποιό αρχείο.





